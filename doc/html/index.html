<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>CGR Localization: CGR (Laser Scanner, Kinect - FSPF) Localization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CGR Localization
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CGR (Laser Scanner, Kinect - FSPF) Localization </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro"></a>
1. Summary</h1>
<p>This package provides the code for CGR localization to localize a robot in 2D using either laser rangefinder readings or depth images obtained from Kinect-style sensors.</p>
<ul>
<li>Authors: Joydeep Biswas (joydeepb AT ri DOT cmu DOT edu), Brian Coltin (bcoltin AT ri DOT cmu DOT edu)</li>
<li>License: LGPL</li>
<li>Source: hg <a href="http://hg.cobotrobots.com/cgr_localization">http://hg.cobotrobots.com/cgr_localization</a></li>
</ul>
<h1><a class="anchor" id="depend"></a>
2. Dependencies</h1>
<p>To install all dependencies on Ubuntu, run "./InstallPackages", or copy &amp; run the following command: </p>
<pre class="fragment">sudo apt-get install g++ libqt4-dev cmake libpopt-dev libusb-1.0-0-dev liblua5.1-dev libglew1.5-dev libeigen3-dev </pre><p> On other platforms, you will have to manually install the following packages:</p>
<ul>
<li>A C++ compiler like <a href="http://gcc.gnu.org/">GCC</a></li>
<li><a href="http://www.cmake.org/cmake/resources/software.html">cmake</a></li>
<li><a href="http://qt.nokia.com/downloads">QT</a></li>
<li><a href="http://freecode.com/projects/popt">popt</a></li>
<li><a href="http://libusb.org/">libusb</a></li>
<li><a href="http://www.lua.org/">LUA</a></li>
<li><a href="http://glew.sourceforge.net/">GLEW</a></li>
<li><a href="http://glew.sourceforge.net/">eigen3</a></li>
</ul>
<h1><a class="anchor" id="compile"></a>
3. Compiling</h1>
<p>Run "make" in the cgr_localization folder OR run "rosmake cgr_localization" after adding the full path of the cgr_localization package to the ROS_PACKAGES_PATH environemt variable.</p>
<h1><a class="anchor" id="test"></a>
4. Testing with demo data</h1>
<p>The following demo data sets are available:</p>
<ol type="1">
<li>CoBot2 in GHC7 (LIDAR)<ul>
<li>Download the ROS bag file from <a href="http://cobotrobots.com/data/cgr_localization/cobot2_ghc7_lidar.bag">http://cobotrobots.com/data/cgr_localization/cobot2_ghc7_lidar.bag</a></li>
<li>Modify the file config/localization_parameters.cfg, line 3 to<pre class="fragment">mapName = "GHC7"; </pre></li>
</ul>
</li>
<li>CoBot2 in GHC7 (Kinect)<ul>
<li>Download the ROS bag file from <a href="http://cobotrobots.com/data/cgr_localization/cobot2_ghc7_kinect.bag">http://cobotrobots.com/data/cgr_localization/cobot2_ghc7_kinect.bag</a></li>
<li>Modify the file config/localization_parameters.cfg, line 3 to<pre class="fragment">mapName = "GHC7"; </pre></li>
</ul>
</li>
<li>CoBot2 in NSH4 (LIDAR)<ul>
<li>Download the ROS bag file from <a href="http://cobotrobots.com/data/cgr_localization/cobot2_nsh4_lidar.bag">http://cobotrobots.com/data/cgr_localization/cobot2_nsh4_lidar.bag</a></li>
<li>Modify the file config/localization_parameters.cfg, line 3 to<pre class="fragment">mapName = "NSH4"; </pre></li>
</ul>
</li>
</ol>
<p>To run the code with the demo data:</p>
<ol type="1">
<li>Use<pre class="fragment">roslaunch cgr_localization cgr_demo_laser.launch </pre> to run CGR localization using LIDAR observations and display that on the bundled GUI, OR<pre class="fragment">roslaunch cgr_localization cgr_demo_kinect.launch </pre> to run CGR localization using Kinect depth image observations.</li>
<li>Play back the data file with<pre class="fragment">rosbag play &lt;bagfile.bag&gt; --clock </pre></li>
</ol>
<h1><a class="anchor" id="robot"></a>
5. Running on your own robot</h1>
<ol type="1">
<li><b>Creating A Vector Map</b>: To run cgr localization on your own robot, you need to generate a vector map of your environment. For an example vector map, see maps/GHC7/GHC7_vector.txt . Each entry in the vector map represents a line (wall) in the world, and is of the form: <pre class="fragment">x1, y1, x2, y2 </pre> where x1, y1 is the start location and x2, y2 the end location of the line. The vector maps reside in the maps folder. For example, the map for "GHC7" resides in the file maps/GHC7/GHC7_vector.txt . Once the map is created, it needs to be added to maps/atlas.txt so that cgr_localization loads it on startup.</li>
<li><b>Generate Map Visibility Lists</b>: CGR localization uses analytic raycasts on vector maps for the observation functions. To speed up the analytic renders at runtime, visibility lists are pre-computed for the vector maps. To generate the visibility list for your map, run the following command: <pre class="fragment">./bin/pre_render -m"YourMapName" [ -n NumberOfThreads ]
</pre> For example: <pre class="fragment">./bin/pre_render -m"GHC7" -n8
</pre></li>
<li><b>ROS topics</b>: The required ROS topics are "odom" of type <a href="http://www.ros.org/doc/api/nav_msgs/html/msg/Odometry.html">nav_msgs/Odometry</a> , and "scan" of type <a href="http://www.ros.org/doc/api/sensor_msgs/html/msg/LaserScan.html">sensor_msgs/LaserScan</a> and/or "kinect_depth" of type <a href="http://www.ros.org/doc/api/sensor_msgs/html/msg/Image.html">sensor_msgs/Image</a> (Raw 16-bit depth data gathered via libfreenect from the kinect</li>
</ol>
<h1><a class="anchor" id="cite"></a>
Publications</h1>
<ol type="1">
<li>"Corrective Gradient Reﬁnement for Mobile Robot Localization", Joydeep Biswas, Brian Coltin, and Manuela Veloso, Proceedings of IEEE/RSJ International Conference on Intelligent Robots and Systems, September, 2011, pp. 73 - 78. <a href="http://joydeepb.com/Publications/iros2011_cgr.pdf">PDF</a></li>
<li>"Depth Camera Based Indoor Mobile Robot Localization and Navigation", Joydeep Biswas and Manuela Veloso, Proceedings of IEEE International Conference on Robotics and Automation, May, 2012. <a href="http://joydeepb.com/Publications/icra2012_kinectLocalization.pdf">PDF</a> </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Sep 11 2014 11:09:56 for CGR Localization by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
