<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CGR Localization: CGR (Laser Scanner, Kinect - FSPF) Localization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>CGR (Laser Scanner, Kinect - FSPF) Localization </h1><h2><a class="anchor" id="intro">
1. Summary</a></h2>
<p>This package provides the code for CGR localization to localize a robot in 2D using either laser rangefinder readings or depth images obtained from Kinect-style sensors.</p>
<ul>
<li>Authors: Joydeep Biswas (joydeepb AT ri DOT cmu DOT edu), Brian Coltin (bcoltin AT ri DOT cmu DOT edu)</li>
<li>License: LGPL</li>
<li>Source: hg <a href="http://hg.cobotrobots.com/cgr_localization">http://hg.cobotrobots.com/cgr_localization</a></li>
</ul>
<h2><a class="anchor" id="depend">
2. Dependencies</a></h2>
<p>To install all dependencies on Ubuntu, run "./InstallPackages", or copy &amp; run the following command: </p>
<div class="fragment"><pre class="fragment">sudo apt-get install g++ libqt4-dev cmake libpopt-dev libusb-1.0-0-dev liblua5.1-dev libglew1.5-dev libeigen3-dev </pre></div><p> On other platforms, you will have to manually install the following packages:</p>
<ul>
<li>A C++ compiler like <a href="http://gcc.gnu.org/">GCC</a></li>
<li><a href="http://www.cmake.org/cmake/resources/software.html">cmake</a></li>
<li><a href="http://qt.nokia.com/downloads">QT</a></li>
<li><a href="http://freecode.com/projects/popt">popt</a></li>
<li><a href="http://libusb.org/">libusb</a></li>
<li><a href="http://www.lua.org/">LUA</a></li>
<li><a href="http://glew.sourceforge.net/">GLEW</a></li>
<li><a href="http://glew.sourceforge.net/">eigen3</a></li>
</ul>
<h2><a class="anchor" id="compile">
3. Compiling</a></h2>
<p>Run "make" in the cgr_localization folder OR run "rosmake cgr_localization" after adding the full path of the cgr_localization package to the ROS_PACKAGES_PATH environemt variable.</p>
<h2><a class="anchor" id="test">
4. Testing with demo data</a></h2>
<p>The following demo data sets are available:</p>
<ol type="1">
<li>CoBot2 in GHC7 (LIDAR)<ul>
<li>Download the ROS bag file from <a href="http://data.cobotrobots.com/cgr_localization/cobot2_ghc7_lidar.bag">http://data.cobotrobots.com/cgr_localization/cobot2_ghc7_lidar.bag</a></li>
<li>Modify the file config/localization_parameters.cfg, line 3 to <div class="fragment"><pre class="fragment">mapName = "GHC7"; </pre></div></li>
</ul>
</li>
<li>CoBot2 in GHC7 (Kinect)<ul>
<li>Download the ROS bag file from <a href="http://data.cobotrobots.com/cgr_localization/cobot2_ghc7_kinect.bag">http://data.cobotrobots.com/cgr_localization/cobot2_ghc7_kinect.bag</a></li>
<li>Modify the file config/localization_parameters.cfg, line 3 to <div class="fragment"><pre class="fragment">mapName = "GHC7"; </pre></div></li>
</ul>
</li>
<li>CoBot2 in NSH4 (LIDAR)<ul>
<li>Download the ROS bag file from <a href="http://data.cobotrobots.com/cgr_localization/cobot2_nsh4_lidar.bag">http://data.cobotrobots.com/cgr_localization/cobot2_nsh4_lidar.bag</a></li>
<li>Modify the file config/localization_parameters.cfg, line 3 to <div class="fragment"><pre class="fragment">mapName = "NSH4"; </pre></div></li>
</ul>
</li>
</ol>
<p>To run the code with the demo data:</p>
<ol type="1">
<li>Use <div class="fragment"><pre class="fragment">roslaunch cgr_localization cgr_demo_laser.launch </pre></div> to run CGR localization using LIDAR observations and display that on the bundled GUI, OR <div class="fragment"><pre class="fragment">roslaunch cgr_localization cgr_demo_kinect.launch </pre></div> to run CGR localization using Kinect depth image observations.</li>
<li>Play back the data file with <div class="fragment"><pre class="fragment">rosbag play &lt;bagfile.bag&gt; --clock </pre></div></li>
</ol>
<h2><a class="anchor" id="robot">
5. Running on your own robot</a></h2>
<ol type="1">
<li><b>Creating A Vector Map</b>: To run cgr localization on your own robot, you need to generate a vector map of your environment. For an example vector map, see maps/GHC7/GHC7_vector.txt . Each entry in the vector map represents a line (wall) in the world, and is of the form: <div class="fragment"><pre class="fragment">x1, y1, x2, y2 </pre></div> where x1, y1 is the start location and x2, y2 the end location of the line. The vector maps reside in the maps folder. For example, the map for "GHC7" resides in the file maps/GHC7/GHC7_vector.txt . Once the map is created, it needs to be added to maps/atlas.txt so that cgr_localization loads it on startup.</li>
<li><b>Generate Map Visibility Lists</b>: CGR localization uses analytic raycasts on vector maps for the observation functions. To speed up the analytic renders at runtime, visibility lists are pre-computed for the vector maps. To generate the visibility list for your map, run the following command: <div class="fragment"><pre class="fragment">
./bin/pre_render -m"YourMapName" [ -n NumberOfThreads ]
</pre></div> For example: <div class="fragment"><pre class="fragment">
./bin/pre_render -m"GHC7" -n8
</pre></div></li>
<li><b>ROS topics</b>: The required ROS topics are "odom" of type <a href="http://www.ros.org/doc/api/nav_msgs/html/msg/Odometry.html">nav_msgs/Odometry</a> , and "scan" of type <a href="http://www.ros.org/doc/api/sensor_msgs/html/msg/LaserScan.html">sensor_msgs/LaserScan</a> and/or "kinect_depth" of type <a href="http://www.ros.org/doc/api/sensor_msgs/html/msg/Image.html">sensor_msgs/Image</a> (Raw 16-bit depth data gathered via libfreenect from the kinect</li>
</ol>
<h2><a class="anchor" id="cite">
Publications</a></h2>
<ol type="1">
<li>"Corrective Gradient ReÔ¨Ånement for Mobile Robot Localization", Joydeep Biswas, Brian Coltin, and Manuela Veloso, Proceedings of IEEE/RSJ International Conference on Intelligent Robots and Systems, September, 2011, pp. 73 - 78. <a href="http://joydeepb.com/Publications/iros2011_cgr.pdf">PDF</a></li>
<li>"Depth Camera Based Indoor Mobile Robot Localization and Navigation", Joydeep Biswas and Manuela Veloso, Proceedings of IEEE International Conference on Robotics and Automation, May, 2012. <a href="http://joydeepb.com/Publications/icra2012_kinectLocalization.pdf">PDF</a> </li>
</ol>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Sun May 13 12:39:02 2012 for CGR Localization by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
